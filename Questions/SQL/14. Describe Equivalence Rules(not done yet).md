## 14. Describe Equivalence Rules

I recommend you look at cap. 13 page 579 in the book, query optimization.

Equivalence rules is used when we talk about query optimization.

Query optimization is the process of selecting the most efficient query-evaluation plan from among the many strategies, witch usually is possible for processing a given query, especially if the query is complex.

An equivalence rule says that expressions of two forms are equivalent. We can replace an expression of the first form by an expression of the second form, or vice versa—that is, we can replace an expression of the second form by an expression of the first form—since the two expressions generate the same result on any
valid database. The optimizer uses equivalence rules to transform expressions into other logically equivalent expressions.

Look at the example in the book on page 579.

Look at the relational algebra for the  query “Find the names of all instructors in the Music department together with the course title of all the courses that the instructors teach.” in (1), it can by rule 7 a be transformed in to (2), which is equivalent to our original algebra expression, but generates smaller
intermediate relations. 7a only say its the same not necessarily better.

<img src="http://imgur.com/Yhm1RA2.png" width="700">



<img src="http://imgur.com/U5LDX1r.png" width="500">



Summery:

• Given a query, there are generally a variety of methods for computing the answer. It is the responsibility of the system to transform the query as entered by the user into an equivalent query that can be computed more efficiently. The process of finding a good strategy for processing a query is called query optimization.

• The evaluation of complex queries involves many accesses to disk. Since the transfer of data from disk is slow relative to the speed of main memory and the CPU of the computer system, it is worthwhile to allocate a considerable amount of processing to choose a method that minimizes disk accesses.

• There are a number of equivalence rules that we can use to transform an expression into an equivalent one. We use these rules to generate systematically all expressions equivalent to the given query.

• Each relational-algebra expression represents a particular sequence of operations. The first step in  selecting a query-processing strategy is to find a relational-algebra expression that is equivalent to the given expression and is estimated to cost less to execute.

• The strategy that the database system chooses for evaluating an operation depends on the size of each relation and on the distribution of values within columns. So that they can base the strategy choice on reliable information, database systems may store statistics for each relation r. These statistics in-
clude:

​	◦ The number of tuples in the relation r.

​	◦ The size of a record (tuple) of relation r in bytes.

​	◦ The number of distinct values that appear in the relation r for a particular attribute.

• Most database systems use histograms to store the number of values for an attribute within each of several ranges of values. Histograms are often computed using sampling.

• These statistics allow us to estimate the sizes of the results of various operations, as well as the cost of executing the operations. Statistical information about relations is particularly useful when several indices are available to assist in the processing of a query. The presence of these structures has a significant influence on the choice of a query-processing strategy.

• Alternative evaluation plans for each expression can be generated by equivalence rules, and the cheapest plan across all expressions can be chosen. Several optimization techniques are available to reduce the number of alter native expressions and plans that need to be generated.

• We use heuristics to reduce the number of plans considered, and thereby to reduce the cost of optimization. Heuristic rules for transforming relational algebra queries include “Perform selection operations as early as possible,” “Perform projections early,” and “Avoid Cartesian products.”

#### Equivalence rules:

<img src="http://imgur.com/soSZlLR.png" width="800">

<img src="http://imgur.com/UVupeQw.png" width="800">

<img src="http://imgur.com/JhGy1Cp.png" width="780">



#### 

